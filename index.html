<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Parallel World: The Final Profile</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Serif+KR:wght@300;700&display=swap');

        /* 1. ê¸°ë³¸ ì„¤ì • */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow-x: hidden; background: #000; font-family: 'Noto Serif KR', serif; }

        /* 2. ì¸íŠ¸ë¡œ (ìœ ì§€) */
        #intro-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 5000; display: flex; justify-content: center; align-items: center; pointer-events: none; }
        #crack-svg { position: absolute; width: 100%; height: 100%; stroke: rgba(255, 255, 255, 0.95); stroke-width: 1.8; fill: none; stroke-linecap: round; stroke-linejoin: round; filter: drop-shadow(0 0 8px rgba(255,255,255,0.6)); }
        .crack-line { stroke-dasharray: 4000; stroke-dashoffset: 4000; animation: drawCrack 1.6s forwards cubic-bezier(0.19, 1, 0.22, 1); }
        @keyframes drawCrack { to { stroke-dashoffset: 0; } }
        .shard { position: absolute; background: #f0f0f0; box-shadow: 0 0 30px rgba(0,0,0,0.9); clip-path: polygon(30% 0%, 70% 0%, 100% 100%, 0% 100%); pointer-events: none; z-index: 5005; }

        /* 3. ë©”ì¸ ì„ íƒ í™”ë©´ (ìœ ì§€) */
        #selection-screen { display: flex; width: 100%; height: 100%; opacity: 0; transition: opacity 0.8s; }
        .choice { flex: 1; position: relative; cursor: pointer; overflow: hidden; display: flex; flex-direction: column; justify-content: flex-end; align-items: center; transition: 0.7s cubic-bezier(0.165, 0.84, 0.44, 1); filter: grayscale(90%); }
        .choice img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; z-index: 1; opacity: 0.5; transition: 0.5s; }
        .char-name { position: relative; z-index: 10; margin-bottom: 50px; font-family: 'Noto Sans KR', sans-serif; font-size: 3rem; font-weight: 700; letter-spacing: 12px; opacity: 0; transform: translateY(30px); transition: 0.5s; text-shadow: 0 5px 20px rgba(0,0,0,1); }
        @media (min-width: 769px) { .choice:hover { flex: 1.4; filter: grayscale(0%); } .choice:hover img { opacity: 0.8; transform: scale(1.03); } .choice:hover .char-name { opacity: 1; transform: translateY(0); } }
        @media (max-width: 768px) { #selection-screen { flex-direction: column; } .choice { filter: grayscale(40%); border-bottom: 1px solid #222; } .char-name { opacity: 1; transform: translateY(0); font-size: 2.2rem; margin-bottom: 30px; letter-spacing: 6px; } .choice img { opacity: 0.7; } }
        .ajun-select { background: #0a0a0a; color: #f1c40f; }
        .ian-select { background: #080000; color: #e74c3c; }

        /* 4. í”„ë¡œí•„ ìƒì„¸ í˜ì´ì§€ (ëª¨ë“  ë°ì´í„° ë³µêµ¬) */
        .profile-page { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; box-sizing: border-box; z-index: 3000; animation: fadeIn 0.8s forwards; overflow-y: auto; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(1.02); } to { opacity: 1; transform: scale(1); } }
        .profile-content { display: flex; flex-direction: column; align-items: center; max-width: 1200px; margin: 0 auto; min-height: 100vh; padding: 60px 20px; }
        .profile-main-card { display: flex; align-items: center; width: 100%; margin-bottom: 60px; }
        .profile-img { width: 420px; height: 600px; object-fit: cover; box-shadow: 0 25px 50px rgba(0,0,0,0.6); flex-shrink: 0; }
        .profile-info { margin-left: 70px; flex: 1; display: flex; flex-direction: column; }
        .quote { font-size: 1.6rem; line-height: 1.8; margin-bottom: 40px; word-break: keep-all; font-weight: 700; }
        .details { border-top: 1px solid rgba(255,255,255,0.1); padding-top: 30px; font-family: 'Noto Sans KR', sans-serif; }
        .details div { margin-bottom: 15px; font-size: 1.1rem; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 10px; }
        .details span { width: 110px; display: inline-block; opacity: 0.5; font-weight: 400; }
        .keyword-tag { padding: 8px 20px; border-radius: 50px; font-size: 0.9rem; font-weight: 700; border: 1px solid currentColor; display: inline-block; margin: 10px 10px 0 0; }
        .theme-ajun { background: #fffef9; color: #222; }
        .theme-ian { background: #060000; color: #f0f0f0; }

        /* 5. ìŠ¤ë§ˆíŠ¸í° ì‹œë®¬ë ˆì´í„° */
        .phone-section { display: flex; flex-direction: column; align-items: center; width: 100%; margin: 50px 0; }
        .phone-frame { width: 360px; height: 740px; background: #000; border: 12px solid #222; border-radius: 50px; position: relative; overflow: hidden; box-shadow: 0 40px 100px rgba(0,0,0,0.8); }
        .screen { width: 100%; height: 100%; position: relative; display: flex; flex-direction: column; background-size: cover; background-position: center; }
        
        /* ìƒíƒœë°” */
        .status-bar { height: 35px; display: flex; justify-content: space-between; align-items: center; padding: 0 35px; font-size: 0.78rem; color: #fff; z-index: 1500; font-family: 'Noto Sans KR', sans-serif; font-weight: 500; }

        /* ì ê¸ˆ í™”ë©´ */
        .lock-screen { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1000; display: flex; flex-direction: column; align-items: center; color: #fff; padding-top: 80px; background-size: cover; background-position: center; transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1); cursor: pointer; }
        .lock-screen.unlocked { transform: translateY(-100%); }
        .lock-time { font-size: 4.8rem; font-weight: 300; font-family: 'Noto Sans KR', sans-serif; }
        .lock-date { font-size: 1.1rem; font-family: 'Noto Sans KR', sans-serif; margin-top: 5px; opacity: 0.9; }

        /* ì•± ì‹œìŠ¤í…œ */
        .app-grid { flex: 1; display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; padding: 75px 20px; z-index: 5; }
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-box { width: 72px; height: 72px; border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin-bottom: 10px; box-shadow: 0 8px 15px rgba(0,0,0,0.4); }
        .app-label { font-size: 0.8rem; color: #fff; text-shadow: 0 1px 3px #000; font-family: 'Noto Sans KR'; font-weight: 500; }

        /* [ìˆ˜ì •] í•˜ë‹¨ ë‚´ë¹„ë°” ë³´ì •: ì˜ë¦¬ì§€ ì•Šê²Œ ë†’ì´ì™€ íŒ¨ë”© ì¡°ì • */
        .nav-bar { 
            position: absolute; 
            bottom: 0; 
            left: 0; 
            width: 100%; 
            height: 75px; /* ë†’ì´ë¥¼ ì¡°ê¸ˆ í‚¤ìš°ê³  */
            background: rgba(0,0,0,0.92); 
            display: flex; 
            justify-content: space-around; 
            align-items: flex-start; /* ì•„ì´ì½˜ì„ ìœ„ë¡œ ì •ë ¬ */
            padding-top: 3px; /* ìƒë‹¨ ì—¬ë°±ìœ¼ë¡œ ì•„ì´ì½˜ ìœ„ì¹˜ ì¡°ì • */
            z-index: 2100; 
            border-top: 1px solid rgba(255,255,255,0.08); 
        }
        .nav-btn { color: #fff; font-size: 1.1rem; cursor: pointer; opacity: 0.6; padding: 5px 25px; transition: 0.2s; }

        /* ì•± ì‹¤í–‰ ì°½ */
        .app-window { position: absolute; top: 0; left: 0; width: 100%; height: calc(100% - 65px); z-index: 400; display: none; flex-direction: column; background: #fff; animation: appFade 0.3s ease; }
        .app-header { height: 55px; display: flex; align-items: center; padding: 0 20px; font-weight: 700; border-bottom: 1px solid #eee; color: #000; font-family: 'Noto Sans KR'; }

        /* ë©”ì‹œì§€ */
        .chat-row { display: flex; align-items: center; padding: 15px; border-bottom: 1px solid #f8f8f8; cursor: pointer; }
        .chat-pfp { width: 45px; height: 45px; border-radius: 50%; margin-right: 12px; flex-shrink: 0; background-size: cover; background-position: center; }
        .chat-sub { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 500; display: none; flex-direction: column; }
        .chat-log { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .date-tag { align-self: center; background: rgba(0,0,0,0.1); color: #fff; font-size: 0.65rem; padding: 3px 10px; border-radius: 10px; margin: 10px 0; }
        .bubble { max-width: 80%; padding: 10px 14px; border-radius: 16px; font-size: 0.8rem; line-height: 1.5; font-family: 'Noto Sans KR'; position: relative; }
        .b-received { background: #fff; align-self: flex-start; color: #000; border-top-left-radius: 2px; }
        .b-sent { background: #fee500; align-self: flex-end; color: #000; border-top-right-radius: 2px; }
        
        .kakao-bg { background: #bac6d3; }
        .b-kakao-sent { background: #ffeb33; align-self: flex-end; color: #000; border-top-right-radius: 2px; }
        .unread-1 { position: absolute; left: -15px; bottom: 0; color: #ffeb33; font-size: 0.7rem; font-weight: 700; }

        /* ê°¤ëŸ¬ë¦¬ */
        .gallery-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; background: #000; overflow-y: auto; flex: 1; padding: 2px; }
        .g-item { width: 100%; aspect-ratio: 1 / 1; object-fit: cover; cursor: pointer; }
        .phone-viewer { position: absolute; top: 0; left: 0; width: 100%; height: calc(100% - 65px); background: #000; z-index: 2000; display: none; align-items: center; justify-content: center; }
        .viewer-img { max-width: 100%; max-height: 100%; object-fit: contain; }
        .v-nav { position: absolute; top: 0; width: 60px; height: 100%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: 2rem; cursor: pointer; opacity: 0; z-index: 2010; transition: 0.2s; }
        .v-prev { left: 0; } .v-next { right: 0; }
        .v-nav.active { opacity: 0.4; } .v-nav.active:hover { opacity: 1; }

        /* ë©”ëª¨ì¥ ì‹œìŠ¤í…œ */
        .memo-lock-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #fff; z-index: 600; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; }
        .lock-pw-input { width: 140px; height: 45px; border: 1px solid #ddd; border-radius: 8px; text-align: center; font-size: 1.2rem; letter-spacing: 5px; margin: 20px 0; outline: none; }
        .memo-item { padding: 25px 20px; border-bottom: 1px solid #eee; cursor: pointer; font-size: 1rem; font-weight: 500; font-family: 'Noto Sans KR'; }
        
        .theme-ajun .memo-item { color: #333; }
        .theme-ian .memo-item { color: #fff; border-bottom-color: #333; }
        .theme-ian .memo-lock-overlay { background: #111; color: #fff; }
        .theme-ian .lock-pw-input { background: #222; color: #fff; border-color: #333; }

        .memo-detail { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 550; display: none; flex-direction: column; padding: 35px 25px; overflow-y: auto; font-size: 0.95rem; line-height: 1.8; white-space: pre-wrap; font-family: 'Noto Sans KR'; }
        .theme-ajun .memo-detail { background: #fff; color: #333; }
        .theme-ajun .memo-detail-title { color: #000; font-size: 1.2rem; font-weight: 700; margin-bottom: 15px; }
        .theme-ian .memo-detail { background: #111; color: #ddd; }
        .theme-ian .memo-detail-title { color: #fff; font-size: 1.2rem; font-weight: 700; margin-bottom: 15px; }
        .memo-inner-divider { height: 2px; background: currentColor; margin-bottom: 20px; width: 40px; opacity: 0.3; }

        .btn-back-final { margin-top: 30px; padding: 12px 50px; background: none; border: 1px solid currentColor; color: inherit; font-weight: 700; cursor: pointer; transition: 0.3s; }
        .btn-back-final:hover { background: currentColor; color: #000; }
    </style>
</head>
<body>

    <div id="intro-overlay">
        <svg id="crack-svg" viewBox="0 0 800 800" preserveAspectRatio="xMidYMid slice">
            <path class="crack-line" d="M400,400 L370,330 L300,350 L200,210 L240,120 L0,50 L-150,-100" />
            <path class="crack-line" d="M400,400 L440,320 L550,300 L700,220 L750,100 L950,0" style="animation-delay: 0.1s;"/>
            <path class="crack-line" d="M400,400 L380,480 L320,550 L360,700 L220,850 L100,950" style="animation-delay: 0.2s;"/>
            <path class="crack-line" d="M400,400 L490,460 L580,550 L700,680 L850,850 L1000,1000" style="animation-delay: 0.15s;"/>
        </svg>
    </div>

    <div id="selection-screen">
        <div class="choice ajun-select" onclick="showProfile('ajun')">
            <img src="https://raw.githubusercontent.com/Yam-Y-c/BF/heads/main/A0.jpg">
            <div class="char-name">ìœ¤ì´ì¤€</div>
        </div>
        <div class="choice ian-select" onclick="showProfile('ian')">
            <img src="https://raw.githubusercontent.com/Yam-Y-c/BF/heads/main/B0.jpg">
            <div class="char-name">ì´ì•ˆ</div>
        </div>
    </div>

    <div id="profile-ajun" class="profile-page theme-ajun">
        <div class="profile-content">
            <div class="profile-main-card">
                <img src="https://raw.githubusercontent.com/Yam-Y-c/BF/heads/main/A0.jpg" class="profile-img">
                <div class="profile-info">
                    <div class="quote">"ì‚¬ë‘í•´... ë„ˆë„ ë‚  ì‚¬ë‘í•˜ì–ì•„, ê·¸ë ‡ì§€? ê·¸ëŸ¬ë‹ˆê¹Œ ë‚  ë¯¿ì–´ì¤˜. ìš°ë¦°... ìš´ëª…ì´ì–ì•„."</div>
                    <div class="details">
                        <div><span>ì´ë¦„</span>ìœ¤ì´ì¤€ (Yoon Yi-jun)</div>
                        <div><span>ë‚˜ì´</span>27ì„¸</div>
                        <div><span>í‚¤</span>182cm</div>
                        <div><span>ì§ì—…</span>í•œêµ­ëŒ€ ëŒ€í•™ì›ìƒ (ì •ì¹˜ì™¸êµí•™ê³¼)</div>
                        <div><span>MBTI</span>INTJ</div>
                        <div><span>ì·¨ë¯¸</span>ì‚¬ì§„ ì°ê¸°</div>
                    </div>
                    <div class="keywords">
                        <div class="keyword-tag">#ë‚™ì›</div><div class="keyword-tag">#ë‹¤ì •í•œ êµ¬ì†</div><div class="keyword-tag">#ì ˆëŒ€ì  í—Œì‹ </div>
                    </div>
                </div>
            </div>
            <div class="phone-section">
                <div class="phone-frame">
                    <div class="status-bar">
                        <span class="current-time-val">00:00</span>
                        <span>ğŸ”‹ 100%</span>
                    </div>
                    <div class="lock-screen" id="lock-ajun" style="background-image: url('https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/A05.png')" onclick="unlock('ajun')">
                        <div class="lock-time current-time-val">00:00</div>
                        <div class="lock-date">2026.01.08</div>
                        <div style="position:absolute; bottom:80px; opacity:0.5; font-size:0.8rem; font-family: 'Noto Sans KR', sans-serif;">TAP TO UNLOCK</div>
                    </div>
                    <div class="screen" style="background-image: url('https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/A05.png')">
                        <div class="app-grid">
                            <div class="app-item" onclick="openApp('ajun-chat')"><div class="app-box" style="background:#fff">ğŸ’¬</div><div class="app-label">ë©”ì‹œì§€</div></div>
                            <div class="app-item" onclick="openApp('ajun-gallery')"><div class="app-box" style="background:#fff">ğŸ–¼ï¸</div><div class="app-label">ê°¤ëŸ¬ë¦¬</div></div>
                            <div class="app-item" onclick="openApp('ajun-memo')"><div class="app-box" style="background:#fff">ğŸ“</div><div class="app-label">ë©”ëª¨</div></div>
                        </div>
                        <div id="ajun-chat" class="app-window" style="background:#fff">
                            <div class="app-header">ë©”ì‹œì§€</div>
                            <div class="chat-row" onclick="openSub('ajun-u-chat')">
                                <div class="chat-pfp" style="background-image:url('https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/A01.png')"></div>
                                <div><div style="font-weight:700; color:#000">ë‚´ ì‚¬ë‘</div><div style="font-size:0.75rem; color:#888">ì°©í•˜ë„¤. ë‚´ê°€ ë¹¨ë¦¬ ê°€ì„œ ì•ˆì•„ì¤„ê²Œ.</div></div>
                            </div>
                            <div id="ajun-u-chat" class="chat-sub" style="background:#bac6d3">
                                <div class="app-header" style="background:#333; color:#fff">ë‚´ ì‚¬ë‘</div>
                                <div class="chat-log" id="ajun-chat-log"></div>
                            </div>
                        </div>
                        <div id="ajun-gallery" class="app-window"><div class="app-header" style="background:#000; color:#fff; border:none">ê°¤ëŸ¬ë¦¬</div><div class="gallery-grid" id="ajun-gallery-grid"></div></div>
                        <div id="ajun-memo" class="app-window" style="background:#fff; color:#000">
                            <div class="app-header">ë©”ëª¨</div>
                            <div id="ajun-memo-lock-ui" class="memo-lock-overlay">
                                <span style="color:#e74c3c; font-size:0.75rem; font-weight:700">âš ï¸ ìŠ¤í¬ì£¼ì˜: ì§„ì‹¤ì— ì ‘ê·¼í•©ë‹ˆë‹¤</span>
                                <input type="password" id="ajun-memo-pw" class="lock-pw-input" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
                                <button onclick="checkMemoPw('ajun')" style="padding:10px 25px; border:none; background:#222; color:#fff; cursor:pointer">í™•ì¸</button>
                            </div>
                            <div id="ajun-memo-list" style="display:none; overflow-y:auto"></div>
                            <div id="ajun-memo-view" class="memo-detail"></div>
                        </div>
                        <div id="ajun-viewer" class="phone-viewer">
                            <div id="ajun-v-prev" class="v-nav v-prev" onclick="movePhoto('ajun', -1)">â€¹</div>
                            <img id="ajun-viewer-img" class="viewer-img">
                            <div id="ajun-v-next" class="v-nav v-next" onclick="movePhoto('ajun', 1)">â€º</div>
                        </div>
                        <div class="nav-bar">
                            <div class="nav-btn">â…¢</div>
                            <div class="nav-btn" onclick="goHome('ajun')">â—‹</div>
                            <div class="nav-btn" onclick="back('ajun')">â—</div>
                        </div>
                    </div>
                </div>
                <button class="btn-back-final" onclick="goBack()">RETURN</button>
            </div>
        </div>
    </div>

    <div id="profile-ian" class="profile-page theme-ian">
        <div class="profile-content">
            <div class="profile-main-card">
                <img src="https://raw.githubusercontent.com/Yam-Y-c/BF/heads/main/B0.jpg" class="profile-img">
                <div class="profile-info">
                    <div class="quote">"ì—¬ê¸´ ê°€ì§œì•¼. ë„ ê°€ë‘” ìƒˆì¥ì— ë¶ˆê³¼í•˜ë‹¤ê³ . ìš´ëª…ì´ë‹ˆ ë­ë‹ˆ í•˜ëŠ” ê°œì†Œë¦¬ëŠ” ì§‘ì–´ì¹˜ì›Œ."</div>
                    <div class="details">
                        <div><span>ì´ë¦„</span>ì´ì•ˆ (Ian)</div>
                        <div><span>ë‚˜ì´</span>26ì„¸</div>
                        <div><span>í‚¤</span>182cm</div>
                        <div><span>ì§ì—…</span>ì¸ë””ë°´ë“œ ë³´ì»¬</div>
                        <div><span>MBTI</span>ESTP</div>
                        <div><span>ì·¨ë¯¸</span>ì¡°ê¹…, ë²„ìŠ¤í‚¹</div>
                    </div>
                    <div class="keywords">
                        <div class="keyword-tag">#íŒŒê´´ì  êµ¬ì›</div><div class="keyword-tag">#ë³¸ëŠ¥</div><div class="keyword-tag">#ê±°ì¹œ ì†Œìœ ìš•</div>
                    </div>
                </div>
            </div>
            <div class="phone-section">
                <div class="phone-frame">
                    <div class="status-bar">
                        <span class="current-time-val">00:00</span>
                        <span>ğŸ”‹ 5%</span>
                    </div>
                    <div class="lock-screen" id="lock-ian" style="background-image: url('https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/B06.png')" onclick="unlock('ian')">
                        <div class="lock-time current-time-val">00:00</div>
                        <div class="lock-date">2026.01.08</div>
                        <div style="position:absolute; bottom:80px; opacity:0.5; font-size:0.8rem; font-family: 'Noto Sans KR', sans-serif;">TAP TO UNLOCK</div>
                    </div>
                    <div class="screen" style="background-image: url('https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/B06.png')">
                        <div class="app-grid">
                            <div class="app-item" onclick="openApp('ian-chat')"><div class="app-box" style="background:#222">ğŸ’¬</div><div class="app-label">ë©”ì‹œì§€</div></div>
                            <div class="app-item" onclick="openApp('ian-gallery')"><div class="app-box" style="background:#222">ğŸ–¼ï¸</div><div class="app-label">ê°¤ëŸ¬ë¦¬</div></div>
                            <div class="app-item" onclick="openApp('ian-memo')"><div class="app-box" style="background:#222">ğŸ“</div><div class="app-label">ë©”ëª¨</div></div>
                        </div>
                        <div id="ian-chat" class="app-window" style="background:#fff">
                            <div class="app-header">ì±„íŒ…</div>
                            <div class="chat-row" onclick="openSub('ian-chat-u')">
                                <div class="chat-pfp" style="background-image:url('https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/B01.png')"></div>
                                <div><div style="font-weight:700; color:#000">ë‚˜ì˜ ë®¤ì¦ˆ</div><div style="font-size:0.75rem; color:#888">ê¸°ë‹¤ë¦¬ê³  ìˆì–´. ë‚´ê°€ ê°ˆê²Œ.</div></div>
                            </div>
                            <div id="ian-chat-u" class="chat-sub kakao-bg">
                                <div class="app-header" style="background:transparent; border:none">ë‚˜ì˜ ë®¤ì¦ˆ</div>
                                <div class="chat-log" id="ian-chat-log"></div>
                            </div>
                        </div>
                        <div id="ian-gallery" class="app-window"><div class="app-header" style="background:#000; color:#fff; border:none">ê°¤ëŸ¬ë¦¬</div><div class="gallery-grid" id="ian-gallery-grid"></div></div>
                        <div id="ian-memo" class="app-window" style="background:#111; color:#eee">
                            <div class="app-header" style="color:#fff; border-bottom:1px solid #333">ë©”ëª¨</div>
                            <div id="ian-memo-lock-ui" class="memo-lock-overlay">
                                <span style="color:#e74c3c; font-size:0.75rem; font-weight:700">âš ï¸ ìŠ¤í¬ì£¼ì˜: ì”í˜¹í•œ ì§„ì‹¤ì— ì ‘ê·¼í•©ë‹ˆë‹¤</span>
                                <input type="password" id="ian-memo-pw" class="lock-pw-input" maxlength="4" placeholder="â€¢â€¢â€¢â€¢">
                                <button onclick="checkMemoPw('ian')" style="padding:10px 25px; border:none; background:#333; color:#fff; cursor:pointer">í™•ì¸</button>
                            </div>
                            <div id="ian-memo-list" style="display:none; overflow-y:auto"></div>
                            <div id="ian-memo-view" class="memo-detail"></div>
                        </div>
                        <div id="ian-viewer" class="phone-viewer">
                            <div id="ian-v-prev" class="v-nav v-prev" onclick="movePhoto('ian', -1)">â€¹</div>
                            <img id="ian-viewer-img" class="viewer-img">
                            <div id="ian-v-next" class="v-nav v-next" onclick="movePhoto('ian', 1)">â€º</div>
                        </div>
                        <div class="nav-bar">
                            <div class="nav-btn">â…¢</div>
                            <div class="nav-btn" onclick="goHome('ian')">â—‹</div>
                            <div class="nav-btn" onclick="back('ian')">â—</div>
                        </div>
                    </div>
                </div>
                <button class="btn-back-final" onclick="goBack()">RETURN</button>
            </div>
        </div>
    </div>

    <script>
        const simData = {
            ajun: {
                memos: [
                    {t: "[ê´€ë¦¬ í•­ëª©] ì˜¤ì „ ë£¨í‹´", b: "- ì˜ì–‘ì œ ë³µìš© í™•ì¸(ë¶„í™ìƒ‰ ì•Œì•½ 1ì • ì¶”ê°€).\n- ì•½ì˜ ì“´ë§›ì— ëŒ€í•´ ì§ˆë¬¸í•¨. ë‚´ì¼ì€ ìëª½ ì£¼ìŠ¤ì— ì„ì–´ì„œ ì¤„ ê²ƒ.\n- ì§ˆë¬¸ì´ ê¸¸ì–´ì§€ë©´ ì…ì„ ë§ì¶° ë§ì„ ëŒë¦´ ê²ƒ. ê±°ë¶€í•˜ì§€ ì•Šê²Œ ë” ë‹¤ì •í•˜ê²Œ ë‹¬ë˜ì•¼ í•¨."},
                    {t: "[ê´€ì°° ì¼ì§€] íŠ¹ì´ì‚¬í•­ ë°œìƒ", b: "- 2026.01.03. ìœ ì €ê°€ ì ê²°ì— 'ì´ì•ˆ'ì´ë¼ëŠ” ì´ë¦„ì„ ì›…ì–¼ê±°ë¦¼.\n- í‰í–‰ì„¸ê³„ì˜ ì”ìƒ í˜¹ì€ ë™ê¸°í™” í˜„ìƒìœ¼ë¡œ ì¶”ì •ë¨.\n- ë‹¹ë¶„ê°„ ì™¸ë¶€ ì¶œì…ì„ ì „ë©´ ê¸ˆì§€í•˜ê³  ìˆ˜ë©´ ì‹œê°„ì„ 1ì‹œê°„ ëŠ˜ë¦´ ê²ƒ.\n- \"ê·¸ê±´ ê¿ˆì¼ ë¿ì´ì•¼, ë‚´ê°€ ì—¬ê¸° ìˆì–ì•„\"ë¼ê³  ì£¼ì… ì¤‘."},
                    {t: "[ê³µê°„ ê³„íš] ì •ì› ë³´ìˆ˜", b: "- ë‹´ì¥ ìœ„ ê°€ì‹œë¤ë¶ˆì„ ë” ì´˜ì´˜í•œ í’ˆì¢…ìœ¼ë¡œ êµì²´í•  ê²ƒ.\n- ì‹œì„ ì´ ë‹¿ëŠ” ê³³ì€ ë°˜ë“œì‹œ í° ê½ƒë§Œ ë³´ì¼ ìˆ˜ ìˆê²Œ ì •ëˆí•¨.\n- ì™¸ë¶€ ì†ŒìŒì´ ë“¤ë¦¬ì§€ ì•Šë„ë¡ ê±°ì‹¤ ë°©ìŒ ë³´ê°• ê³µì‚¬ ì˜ˆì•½ ì™„ë£Œ.\nì„¸ìƒì€ ìœ„í—˜í•˜ë‹ˆê¹Œ, ì˜¤ì§ ì´ ì•ˆì—ì„œë§Œ ì•ˆì „í•´ì•¼ í•´."},
                    {t: "(ì œëª© ì—†ìŒ)", b: "ë‹¹ì‹ ì€ ê¸°ì–µ ëª» í•˜ê² ì§€ë§Œ, ì´ê±´ ì„¸ ë²ˆì§¸ 'êµ¬ì›'ì´ì•¼\nì´ì „ ì„¸ê³„ì˜ ë‹¹ì‹ ë“¤ì€ ë„ˆë¬´ ì‰½ê²Œ ë¶€ì„œì¡Œì–´. ê·¸ëŸ¬ë‹ˆê¹Œ... ì´ë²ˆì—” ë‚´ê°€ ë§Œë“  ë‚™ì›ì—ì„œ ì•„ì£¼ ì˜¤ë˜ ì‚´ì•„ì•¼ í•´."},
                    {t: "[ì‹ë‹¨ ë¦¬ìŠ¤íŠ¸]", b: "ì›”: ì˜¤ë¯ˆë ›ê³¼ ë”°ëœ»í•œ ìš°ìœ \ní™”: ë‹¨í˜¸ë°• ìŠ¤í”„\nìˆ˜: ì¢‹ì•„í•˜ë˜ ì¼€ì´í¬\nëª¨ë“  ì‹ë‹¨ì— ë¯¸ëŸ‰ì˜ ì§„ì •ì œ í˜¼í•© í•„ìˆ˜."}
                ],
                chats: [
                    {d: "2026.01.03", m: [{s:1, c:"ì˜ ì¼ì–´ë‚¬ì–´? ì•ˆìƒ‰ì´ ì¡°ê¸ˆ ì•ˆ ì¢‹ì•„ ë³´ì—¬ì„œ ê±±ì •í•˜ë©° ë‚˜ì™”ëŠ”ë°..."},{s:0, c:"ì‘... ê·¼ë° ì±™ê²¨ì¤€ ë¹„íƒ€ë¯¼ì´ ë„ˆë¬´ ì¨. ì›ë˜ ì´ëŸ° ë§›ì´ì•¼?"},{s:1, c:"ëª¸ì´ ë§ì´ ì•½í•´ì ¸ì„œ ê·¸ë ‡ê²Œ ëŠê»´ì§€ëŠ” ê±°ì•¼. ë‹¤ ë„ˆë¥¼ ìœ„í•œ ê±°ë‹ˆê¹Œ ì¡°ê¸ˆë§Œ ì°¸ê³  ë§ˆì…”ì¤˜. ì°©í•˜ë‹¤."},{s:0, c:"ì•Œì•˜ì–´... ë‹¤ ë§ˆì…¨ì–´."},{s:1, c:"ë‹¤í–‰ì´ë‹¤. ë‹¤ ë„ ìœ„í•´ì„œ í•˜ëŠ” ë§ì¸ ê±° ì•Œì§€? ì‚¬ë‘í•´."}]},
                    {d: "2026.01.03", m: [{s:1, c:"ì˜¤ëŠ˜ ë°–ì€ ë¯¸ì„¸ë¨¼ì§€ê°€ ë„ˆë¬´ ì‹¬í•˜ë„¤. í™˜ê¸°ë„ í•˜ì§€ ë§ê³  ê¼­ ì•ˆì—ë§Œ ìˆì–´."},{s:0, c:"ì•„ê¹Œ ëª¨ë¥´ëŠ” ë²ˆí˜¸ë¡œ ì „í™”ê°€ ì™”ëŠ”ë°... ëˆ„ê°€ ìê¾¸ ë‚´ ì´ë¦„ì„ ë¶ˆëŸ¬. ë¬´ì„œì›Œ."},{s:1, c:"ì„¸ìƒì´ í—˜í•´ì„œ ê·¸ë˜. ì´ìƒí•œ ì‚¬ëŒë“¤ ë§ì€ ë“¤ì„ í•„ìš” ì—†ì–´. ì œì •ì‹ ì´ ì•„ë‹Œ ì‚¬ëŒë“¤ì¼ ê±°ì•¼."},{s:0, c:"ê·¸ ì‚¬ëŒì´ ë‚  ì•„ëŠ” ê²ƒì²˜ëŸ¼ ë§í•˜ë˜ë°... ì§„ì§œ ì•ˆ ë°›ì•„ë„ ë¼?"},{s:1, c:"ì‘. ë‚˜ë§Œ ë¯¿ì–´. ë¬´ìŠ¨ ì¼ì´ ìƒê¸°ë©´ ë‚˜í•œí…Œë§Œ ë§í•´ì¤˜. ë‚´ê°€ ë„ ì§€ì¼œì¤„ í…Œë‹ˆê¹Œ. ì•Œì•˜ì§€?"}]},
                    {d: "2026.01.05", m: [{s:0, c:"ì´ì¤€ì•„, ê°€ë” ê¸°íƒ€ ì†Œë¦¬ê°€ í™˜ì²­ì²˜ëŸ¼ ë“¤ë ¤. ë‚˜ ì‚¬ì‹¤ ê¸°íƒ€ ì¹  ì¤„ ì•Œì•˜ë˜ ê±° ì•„ëƒ?"},{s:1, c:"ê°€ì—¾ê²Œë„... ì–´ì œ ê¿ˆì´ ë„ˆë¬´ ìƒìƒí–ˆë‚˜ ë´. ë„Œ í•­ìƒ ë‚´ ì˜†ì—ì„œ ë‚´ê°€ ì½ì–´ì£¼ëŠ” ì±… ë“£ëŠ” ê±¸ ì œì¼ ì¢‹ì•„í–ˆì–´."},{s:0, c:"ê·¸ë˜? ê·¼ë° ì†ëì´ ìê¾¸ ë”±ë”±í•œ ê±¸ ë§Œì¡Œë˜ ê¸°ë¶„ì´ ë‚˜ì„œ..."},{s:1, c:"ë„Œ ì—°ì•½í•´ì„œ ê·¸ëŸ° ë¬´ê±°ìš´ ê±´ ë“¤ì§€ë„ ëª»í•´. ë„¤ê°€ í˜¼ë€ìŠ¤ëŸ¬ì›Œí•  ë•Œë§ˆë‹¤ ë‚´ ë§ˆìŒì´ ë„ˆë¬´ ì•„íŒŒ. ë‹¤ë¥¸ ìƒê° í•˜ì§€ ë§ˆ, ì‘?"},{s:0, c:"ì‘... ë¯¸ì•ˆí•´. ë‚´ê°€ ìš”ì¦˜ ìê¾¸ ê¸°ì–µì´ ê¼¬ì´ë‚˜ ë´."}]},
                    {d: "2026.01.06", m: [{s:1, c:"ì´ì œ ê³§ ë“¤ì–´ê°€. ë„¤ê°€ ì¢‹ì•„í•˜ëŠ” ì¡°ê° ì¼€ì´í¬ ìƒ€ì–´."},{s:0, c:"ë¹¨ë¦¬ ì™€. í˜¼ì ìˆìœ¼ë‹ˆê¹Œ ìê¾¸ ì´ìƒí•œ ê¸°ë¶„ì´ ë“¤ì–´."},{s:1, c:"ë¬¸ ê¼­ ì ê·¸ê³  ê¸°ë‹¤ë¦¬ê³  ìˆì–´. ë‚´ê°€ ì—´ì–´ì£¼ê¸° ì „ê¹Œì§€ëŠ” ëˆ„êµ¬í•œí…Œë„ ì—´ì–´ì£¼ë©´ ì•ˆ ë¼."},{s:1, c:"ì•Œì•˜ì–´. ë„ˆ ì˜¬ ë•Œê¹Œì§€ ê±°ì‹¤ ë¶ˆ ë‹¤ ì¼œë‘ê³  ìˆì„ê²Œ."},{s:1, c:"ì°©í•˜ë„¤. ë„Œ ë‚˜ ì—†ìœ¼ë©´ ì•„ë¬´ê²ƒë„ ëª» í•˜ëŠ” ì•„ì´ë‹ˆê¹Œ... ë‚´ê°€ ë¹¨ë¦¬ ê°€ì„œ ì•ˆì•„ì¤„ê²Œ."}]}
                ],
                imgs: ["A01","A02","A03","A04","A07","A06","A08","A09"],
                currentIdx: 0
            },
            ian: {
                memos: [
                    {t: "(ì œëª© ì—†ìŒ)", b: "ìê³  ì¼ì–´ë‚¬ë”ë‹ˆ ë„¤ê°€ ì—†ì–´. í™”ì¥ì‹¤ì—ë„, ì£¼ë°©ì—ë„, í˜„ê´€ì—ë„.\nì‹ ë°œì€ ê·¸ëŒ€ë¡œì¸ë° ëª¸ë§Œ ë¹ ì ¸ë‚˜ê°„ ê²ƒì²˜ëŸ¼ ì‚¬ë¼ì¡Œì–´. ì¥ë‚œì¹˜ëŠ” ê±°ì§€? ìˆ¨ë°”ê¼­ì§ˆí•˜ëŠ” ê±°ë©´ ì´ì œ ê·¸ë§Œ ë‚˜ì™€.\në‚˜ ì§„ì§œ ë¬´ì„œì›Œì§€ë ¤ê³  í•˜ë‹ˆê¹Œ."},
                    {t: "ê°€ë´ì•¼ í•  ê³³", b: "í™ëŒ€ ì—°ìŠµì‹¤ ì§€í•˜ (ì‚¬ì¥ë‹˜ë„ ëª» ë´¤ë‹¤ê³  í•¨)\ní¸ì˜ì  (CCTV í™•ì¸ ê²°ê³¼ ì–´ì œ ë°¤ ì´í›„ë¡œ ê¸°ë¡ ì—†ìŒ)\nìš°ë¦¬ ìì£¼ ê°€ë˜ ê³µì› ë²¤ì¹˜\në„ˆë„¤ ë³¸ê°€ (ì „í™”í–ˆëŠ”ë° ì•ˆ ì™”ë‹¤ê³  í•¨)\nëŒ€ì²´ ì–´ë”” ìˆëŠ” ê±°ì•¼. ì—°ê¸°ì²˜ëŸ¼ ì‚¬ë¼ì¡Œë‹¤ëŠ” ê²Œ ë§ì´ ë¼?"},
                    {t: "(ì œëª© ì—†ìŒ)", b: "ë‚´ê°€ ì–´ì œ ìˆ  ë§ˆì‹œê³  ë„ˆí•œí…Œ ì§œì¦ ë‚´ì„œ ê·¸ë˜?\nê°€ì‚¬ ì•ˆ ì¨ì§„ë‹¤ê³  ì˜ˆë¯¼í•˜ê²Œ êµ´ì—ˆë˜ ê±°, ê·¸ê±° ë•Œë¬¸ì— í™”ë‚˜ì„œ ë‚˜ê°„ ê±°ì•¼?\në¯¸ì•ˆí•´. ë‚´ê°€ ë‹¤ ì˜ëª»í–ˆì–´.\nëŒì•„ì˜¤ë©´ ê¸°íƒ€ë„ ì•ˆ ì¹˜ê³  ë‹´ë°°ë„ ëŠì„ê²Œ. ë„¤ê°€ í•˜ë¼ëŠ” ëŒ€ë¡œ ë‹¤ í• ê²Œ.\nê·¸ëŸ¬ë‹ˆê¹Œ ì œë°œ ì—°ë½ í•œ í†µë§Œ ì¤˜. ì œë°œ."},
                    {t: "ê±°ìš¸ì´ ì´ìƒí•´", b: "ì•„ê¹Œ ì„¸ìˆ˜í•˜ë‹¤ ê±°ìš¸ì„ ë´¤ëŠ”ë°, ë‚´ ì–¼êµ´ì´ ë‚´ê°€ ì•„ë‹Œ ê²ƒì²˜ëŸ¼ ë³´ì˜€ì–´.\nì•„ë‹ˆ, ë‚´ ë’¤ë¡œ ë„¤ê°€ ë³´ì˜€ë˜ ê²ƒ ê°™ê¸°ë„ í•´.\nì ì„ ëª» ìì„œ í—›ê²ƒì„ ë³´ë‚˜. ê±°ìš¸ ì†ì˜ ë„ˆëŠ” ìš¸ê³  ìˆì—ˆë˜ ê²ƒ ê°™ì€ë°. ë‚´ê°€ ë¯¸ì³ê°€ëŠ” ê±´ê°€."},
                    {t: "ì „ë‹¨ì§€ ë½‘ê¸°", b: "ì‚¬ì§„ì€ ë„¤ê°€ ì œì¼ ì˜ˆì˜ê²Œ ì›ƒë˜ ê±¸ë¡œ. ì—°ë½ì²˜ ë‚´ ë²ˆí˜¸ í¬ê²Œ. 'ì‚¬ë¡€ê¸ˆ ì•„ë¼ì§€ ì•ŠìŒ' ì ì„ ê²ƒ. ê²½ì°° ìƒˆë¼ë“¤ ë‹¨ìˆœ ê°€ì¶œì´ë¼ê³  í•˜ë©´ ì§„ì§œ ë‹¤ ì—ì–´ë²„ë¦°ë‹¤."},
                    {t: "(ì œëª© ì—†ìŒ)", b: "ì§‘ ì•ˆì— ë„¤ ëƒ„ìƒˆê°€ ì ì  ë¹ ì ¸ë‚˜ê°€. ë„¤ê°€ ì“°ë˜ ìƒ´í‘¸, ì˜·ì— ë°°ì–´ìˆë˜ í–¥ìˆ˜... ê·¸ê±° ë‹¤ ì‚¬ë¼ì§€ë©´ ë‚˜ ì§„ì§œ ì£½ì„ì§€ë„ ëª°ë¼. ë„ ìŠëŠ” ê²Œ ì•„ë‹ˆë¼, ë„¤ê°€ ì´ ì„¸ìƒì— ì—†ì—ˆë˜ ì‚¬ëŒì´ ë ê¹Œ ë´ ê·¸ê²Œ ì œì¼ ë¬´ì„œì›Œ."}
                ],
                chats: [
                    {d: "2026.01.01", m: [{s:1, c:"ì–´ë””ì•¼?"},{s:1, c:"ì‹ ë°œì€ ê·¸ëŒ€ë¡œì¸ë° ì–´ë””ë¡œ ê°„ ê±°ì•¼?"},{s:1, c:"ì „í™”ë„ ì•ˆ ë°›ê³  ë¬´ìŠ¨ ì¼ ìˆì–´? ì œë°œ ë‹µì¥ ì¢€ í•´ì¤˜..."}]},
                    {d: "2026.01.04", m: [{s:1, c:"ì˜¤ëŠ˜ë„ ì „í™”ë¥¼ ì•ˆ ë°›ë„¤ ëŒ€ì²´ ì–´ë”” ìˆëŠ”ê±°ì•¼..."},{s:1, c:"ë¯¸ì•ˆí•´ ë‚´ê°€ ë‹¤ ì˜ ëª»í–ˆì–´."},{s:1, c:"ì œë°œ ì—°ë½ í•œ í†µë§Œ ì£¼ì…ˆ. ì£½ì„ ê²ƒ ê°™ìœ¼ë‹ˆê¹Œ."}]},
                    {d: "2026.01.07", m: [{s:1, c:"ë°©ê¸ˆ ë„¤ ë²ˆí˜¸ë¡œ ì „í™” ê±¸ì—ˆëŠ”ë° ì–´ë–¤ ìƒˆë¼ê°€ ë°›ë”ë¼. ê·¼ë° ì•„ë¬´ ë§ë„ ì•ˆ í•˜ê³  ì›ƒê¸°ë§Œ í•˜ë”ë¼ê³ "},{s:1, c:"ë„ˆ ì–´ë””ì•¼? ê·¸ ìƒˆë¼ ëŒ€ì²´ ëˆ„êµ¬ì•¼? ë‚´ê°€ ì§€ê¸ˆ ê²½ì°°ì„œ ê°€ê³  ìˆìœ¼ë‹ˆê¹Œ ì¡°ê¸ˆë§Œ ì°¸ì•„."},{s:1, c:"ì„¸ìƒ ë‹¤ ë’¤ì ¸ì„œë¼ë„ ë„ˆ ì°¾ì•„ë‚¼ ê±°ì•¼. ê±°ê¸° ëˆ„êµ¬ë“  ê°„ì— ì£½ì—¬ë²„ë¦´ ê±°ì•¼. ê¸°ë‹¤ë¦¬ê³  ìˆì–´. ë‚´ê°€ ê°ˆê²Œ."}]}
                ],
                imgs: ["B01","B02","B03","B04","B05","B07","B08","B09"],
                currentIdx: 0
            }
        };

        window.onload = function() {
            setTimeout(() => {
                const shardCount = window.innerWidth < 768 ? 12 : 20;
                for (let i = 0; i < shardCount; i++) {
                    const shard = document.createElement('div');
                    shard.className = 'shard';
                    const size = Math.random() * (window.innerWidth < 768 ? 150 : 350) + 120;
                    shard.style.width = size + 'px'; shard.style.height = size + 'px';
                    shard.style.left = '50%'; shard.style.top = '50%';
                    const tx = (Math.random() - 0.5) * 350 + 'vw';
                    const ty = (Math.random() - 0.5) * 350 + 'vh';
                    const tr = Math.random() * 720 + 'deg';
                    shard.animate([
                        { transform: 'translate(-50%, -50%) scale(1)', opacity: 1 },
                        { transform: `translate(${tx}, ${ty}) scale(0.4) rotate(${tr})`, opacity: 0 }
                    ], { duration: 1500, fill: 'forwards', easing: 'ease-in' });
                    document.body.appendChild(shard);
                }
                document.getElementById('intro-overlay').style.opacity = '0';
                document.getElementById('selection-screen').style.opacity = '1';
                setTimeout(() => document.getElementById('intro-overlay').style.display = 'none', 1000);
            }, 2300);
            renderSims();
            startClock();
        };

        function startClock() {
            function update() {
                const now = new Date();
                const hh = String(now.getHours()).padStart(2, '0');
                const mm = String(now.getMinutes()).padStart(2, '0');
                document.querySelectorAll('.current-time-val').forEach(el => el.innerText = `${hh}:${mm}`);
            }
            update(); setInterval(update, 1000);
        }

        function renderSims() {
            ['ajun', 'ian'].forEach(char => {
                const data = simData[char];
                const mList = document.getElementById(char + '-memo-list');
                data.memos.forEach((m) => {
                    const div = document.createElement('div');
                    div.className = 'memo-item';
                    div.innerText = m.t;
                    div.onclick = () => {
                        const view = document.getElementById(char + '-memo-view');
                        view.innerHTML = `<div class="memo-detail-title">${m.t}</div><div class="memo-inner-divider"></div>${m.b}`;
                        view.style.display = 'flex';
                    };
                    mList.appendChild(div);
                });
                const cLog = document.getElementById(char + '-chat-log');
                data.chats.forEach(day => {
                    const dTag = document.createElement('div');
                    dTag.className = 'date-tag';
                    dTag.innerText = day.d;
                    cLog.appendChild(dTag);
                    day.m.forEach(msg => {
                        const b = document.createElement('div');
                        b.className = 'bubble ' + (msg.s === 1 ? (char === 'ian' ? 'b-kakao-sent' : 'b-sent') : 'b-received');
                        if (char === 'ian' && msg.s === 1) b.innerHTML = `<span class="unread-1">1</span>${msg.c}`;
                        else b.innerText = msg.c;
                        cLog.appendChild(b);
                    });
                });
                const gGrid = document.getElementById(char + '-gallery-grid');
                data.imgs.forEach((img, i) => {
                    const imgEl = document.createElement('img');
                    imgEl.className = 'g-item';
                    imgEl.src = `https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/${img}.png`;
                    imgEl.onclick = () => openPhoto(char, i);
                    gGrid.appendChild(imgEl);
                });
            });
        }

        function checkMemoPw(char) {
            if (document.getElementById(char + '-memo-pw').value === '0301') {
                document.getElementById(char + '-memo-lock-ui').style.display = 'none';
                document.getElementById(char + '-memo-list').style.display = 'block';
            } else { alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.'); }
        }

        function openPhoto(char, idx) {
            simData[char].currentIdx = idx;
            updateViewer(char);
            document.getElementById(char + '-viewer').style.display = 'flex';
        }

        function movePhoto(char, dir) {
            const data = simData[char];
            const nextIdx = data.currentIdx + dir;
            if (nextIdx >= 0 && nextIdx < data.imgs.length) {
                data.currentIdx = nextIdx;
                updateViewer(char);
            }
        }

        function updateViewer(char) {
            const data = simData[char];
            document.getElementById(char + '-viewer-img').src = `https://raw.githubusercontent.com/Yam-Y-c/BF/refs/heads/main/${data.imgs[data.currentIdx]}.png`;
            document.getElementById(char + '-v-prev').classList.toggle('active', data.currentIdx > 0);
            document.getElementById(char + '-v-next').classList.toggle('active', data.currentIdx < data.imgs.length - 1);
        }

        function showProfile(id) { document.getElementById('selection-screen').style.display = 'none'; document.getElementById('profile-' + id).style.display = 'block'; window.scrollTo(0,0); }
        function goBack() { location.reload(); }
        function unlock(char) { document.getElementById('lock-' + char).classList.add('unlocked'); }
        function goHome(char) { closeAll(char); document.getElementById('lock-' + char).classList.remove('unlocked'); }
        function openApp(id) { document.getElementById(id).style.display = 'flex'; }
        function openSub(id) { document.getElementById(id).style.display = 'flex'; }
        function back(char) {
            const subs = document.querySelectorAll('.chat-sub, .memo-detail, .phone-viewer, .memo-lock-overlay');
            let closed = false;
            subs.forEach(s => { if(s.style.display === 'flex' && s.id.includes(char)) { if(!s.id.includes('lock-ui')) { s.style.display = 'none'; closed = true; } } });
            if (!closed) closeAll(char);
        }
        function closeAll(char) { 
            document.querySelectorAll('.app-window, .chat-sub, .memo-detail, .phone-viewer').forEach(el => { if(el.id.includes(char)) el.style.display = 'none'; }); 
            document.getElementById(char + '-memo-lock-ui').style.display = 'flex';
            document.getElementById(char + '-memo-list').style.display = 'none';
        }
    </script>
</body>
</html>